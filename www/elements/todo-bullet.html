<link rel="import" href="../bower_components/polymer/polymer.html">
<dom-module id="todo-bullet">
  <template>
    <li>
      <span>{{getContent(bulletModel)}}</span>
      <template is="dom-if" if="{{getIsSelected(bulletModel)}}">
        (selected)
      </template>
      <ul>
        <template is="dom-repeat" items="{{getSubBulletModels(bulletModel)}}">
          <todo-bullet bullet-model={{item}}></todo-bullet>
        </template>
      </ul>
    </li>
  </template>
</dom-module>
<script>
  Polymer({
    is: 'todo-bullet',
    properties: {
      bulletModel: {
        type: Object,
        observer: 'bulletModelChanged'
      }
    },
        
    getContent: function(bulletModel) {
      return bulletModel.getContent();
    },    
    
    getSubBulletModels: function(bulletModel) {
      return bulletModel.getSubBulletModels();
    },
    
    getIsSelected: function(bulletModel) {
      return bulletModel.getIsSelected();
    },
    
    bulletModelChanged: function(bulletModel) {
      var that = this;
      bulletModel.onSelectedChanged = function() {
        console.log(that.bulletModel.getContent() + " " + that.bulletModel.getIsSelected());
        // TODO: make sure it is being redrawn!
      };  
    }
    
   });
</script>