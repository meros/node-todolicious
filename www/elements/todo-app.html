<link rel="import" href="../bower_components/polymer/polymer.html">  
<link rel="import" href="./todo-keyboard.html">
<link rel="import" href="./todo-viewmodel.html">
<link rel="import" href="./todo-view.html">
  
<script src="http://code.jquery.com/jquery-2.1.4.min.js"></script>

<dom-module id="todo-app">
  <template>
    <!-- Invisible elements -->
    <todo-keyboard id="keyboard" on-pressed-tab="onPressedTab" on-pressed-up="onPressedUp" on-pressed-down="onPressedDown" on-pressed-enter="onPressedEnter"></todo-keyboard>
    <todo-viewmodel id="viewmodel" model="{{model}}"" on-bullets-updated="onBulletsUpdated"></todo-viewmodel>
    <!-- Visible elements -->
    <todo-view id="view" model="{{model}}"></todo-view>
  </template>
</dom-module>
<script>
  Polymer({
    is: 'todo-app',
    
    properties: {
      model: Object
    },
    
    onPressedTab: function(e, detail) {
    },
        
    onPressedDown: function(e, detail) {
      this.$.viewmodel.selectNext(true);
    },
     
    onPressedUp: function(e, detail) {
      this.$.viewmodel.selectNext(false);
    },
    
    onPressedEnter: function(e, detail) {
      this.$.viewmodel.splitBulletAtCaret();
    },
  });
</script>